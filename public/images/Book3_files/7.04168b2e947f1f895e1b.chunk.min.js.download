/*! For license information please see 7.04168b2e947f1f895e1b.chunk.min.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{254:function(t,e,o){"use strict";o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return i}));var a,n=o(250);!function(t){t[t.STATUS_LOADING_FONT=0]="STATUS_LOADING_FONT",t[t.STATUS_LOADING_FONT_DONE=1]="STATUS_LOADING_FONT_DONE",t[t.STATUS_LOADING_FONT_ERROR=2]="STATUS_LOADING_FONT_ERROR"}(a||(a={}));var r=function(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?["woff"]:["woff2"]},i=function(){function t(){var t;this.fontsBaseUrl="",this.fontIndex=null,this.fontFormats=r(),"undefined"!=typeof litbReaderFonts&&(this.fontIndex=this.initFontIndex()),this.fontsBaseUrl=(t=document.getElementById("assetsCfUrl"))?t.getAttribute("data-assets-cf-url")+"/assets/fonts":""}return t.prototype.getFontIndex=function(){var t=this;return this.fontIndex?Promise.resolve(this.fontIndex):Object(n.a)(this.fontsBaseUrl+"/fonts.json",{}).then((function(t){return t.json()})).then((function(e){for(var o=0,a=Object.keys(e);o<a.length;o++){e[a[o]].forEach((function(e){e.fontFiles&&e.fontFiles.forEach((function(e){e.url=t.fontsBaseUrl+"/"+e.fileName}))}))}return Promise.resolve(e)}))},t.prototype.selectFontFormat=function(t){for(var e=0,o=t;e<o.length;e++){var a=o[e];if(-1!==this.fontFormats.indexOf(a.format))return a}throw new Error("Unable to find suitable font format")},t.prototype.initFontIndex=function(){for(var t={},e=0,o=Object.keys(litbReaderFonts);e<o.length;e++){var a=o[e];t[a]=litbReaderFonts[a].map((function(t){var e=litbReaderFontsMap.find((function(e){return e.fontFamily===t.fontFamily&&e.fontWeight===t.fontWeight&&e.fontStyle===t.fontStyle&&e.fontStretch===t.fontStretch}));if(!e)throw"Missing font face '"+t.fontFamily+"' for weight = "+t.fontWeight+", style = "+t.fontStyle+", stretch = "+t.fontStretch+" in font face URL map";return{fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontStretch:t.fontStretch,fontMetrics:t.fontMetrics,fontFiles:e.fontFiles}}))}return t},t}()},290:function(t,e,o){"use strict";o.d(e,"a",(function(){return W}));var a={marketplace:"US",domain:"read.amazon.com",region:"us-east-1",storeLink:"www.amazon.com/dp/",marketplaceId:"ATVPDKIKX0DER",katalCloudWatchEndpoint:"https://uq4ue90d3b.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"USAmazon"},n={marketplace:"JP",domain:"read.amazon.co.jp",region:"us-west-2",storeLink:"www.amazon.co.jp/dp/",marketplaceId:"A1VC38T7YXB528",katalCloudWatchEndpoint:"https://arp3q8lp5d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"JPAmazon"},r={marketplace:"CA",domain:"read.amazon.ca",region:"us-east-1",storeLink:"www.amazon.ca/dp/",marketplaceId:"A2EUQ1WTGCTBG2",katalCloudWatchEndpoint:"https://uq4ue90d3b.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},i={marketplace:"BR",domain:"ler.amazon.com.br",region:"us-east-1",storeLink:"www.amazon.com.br/dp/",marketplaceId:"A2Q3Y263D00KWC",katalCloudWatchEndpoint:"https://uq4ue90d3b.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},s={marketplace:"AU",domain:"read.amazon.com.au",region:"us-west-2",storeLink:"www.amazon.com.au/dp/",marketplaceId:"A39IBJ37TRP1C6",katalCloudWatchEndpoint:"https://arp3q8lp5d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"FEAmazon"},c={marketplace:"MX",domain:"leer.amazon.com.mx",region:"us-east-1",storeLink:"www.amazon.com.mx/dp/",marketplaceId:"A1AM78C64UM0Y8",katalCloudWatchEndpoint:"https://uq4ue90d3b.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://b11v5ewz9l.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},m={marketplace:"GB",domain:"read.amazon.co.uk",region:"eu-west-1",storeLink:"www.amazon.co.uk/dp/",marketplaceId:"A1F83G8C2ARO7P",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},p={marketplace:"DE",domain:"lesen.amazon.de",region:"eu-west-1",storeLink:"www.amazon.de/dp/",marketplaceId:"A1PA6795UKMFR9",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},d={marketplace:"FR",domain:"lire.amazon.fr",region:"eu-west-1",storeLink:"www.amazon.fr/dp/",marketplaceId:"A13V1IB3VIYZZH",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},u={marketplace:"IT",domain:"leggi.amazon.it",region:"eu-west-1",storeLink:"www.amazon.it/dp/",marketplaceId:"APJ6JRA9NG5V4",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},l={marketplace:"ES",domain:"leer.amazon.es",region:"eu-west-1",storeLink:"www.amazon.es/dp/",marketplaceId:"A1RKKUPIHCS9HS",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},h={marketplace:"NL",domain:"lezen.amazon.nl",region:"eu-west-1",storeLink:"www.amazon.nl/dp/",marketplaceId:"A1805IZSGTT6HS",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},f={marketplace:"IN",domain:"read.amazon.in",region:"eu-west-1",storeLink:"www.amazon.in/dp/",marketplaceId:"A21TJRUUN4KGV",katalCloudWatchEndpoint:"https://nd5w81xywf.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://hjszhb9uk3.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},w={marketplace:"CN",domain:"read.amazon.cn",region:"us-west-2",storeLink:"www.amazon.cn/dp/",marketplaceId:"AAHKV2X7AFYLW",katalCloudWatchEndpoint:"https://arp3q8lp5d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://bs7kdk5kxb.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"CNAmazon"},g={marketplace:"US",domain:"read-preprod.amazon.com",region:"us-east-1",storeLink:"pre-prod.amazon.com/dp/",marketplaceId:"ATVPDKIKX0DER",katalCloudWatchEndpoint:"https://s1ehmz8awg.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"USAmazon"},k={marketplace:"JP",domain:"read-pre-prod-jp.amazon.com",region:"us-west-2",storeLink:"jp-pre-prod.amazon.com/dp/",marketplaceId:"A1VC38T7YXB528",katalCloudWatchEndpoint:"https://8p02hhqzs7.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"JPAmazon"},z={marketplace:"CA",domain:"read-pre-prod-ca.amazon.com",region:"us-east-1",storeLink:"ca-pre-prod.amazon.com/dp/",marketplaceId:"A2EUQ1WTGCTBG2",katalCloudWatchEndpoint:"https://s1ehmz8awg.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},v={marketplace:"BR",domain:"read-pre-prod-br.amazon.com",region:"us-east-1",storeLink:"br-pre-prod.amazon.com/dp/",marketplaceId:"A2Q3Y263D00KWC",katalCloudWatchEndpoint:"https://s1ehmz8awg.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},E={marketplace:"AU",domain:"read-pre-prod-au.amazon.com",region:"us-west-2",storeLink:"au-pre-prod.amazon.com/dp/",marketplaceId:"A39IBJ37TRP1C6",katalCloudWatchEndpoint:"https://8p02hhqzs7.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"FEAmazon"},C={marketplace:"MX",domain:"read-pre-prod-mx.amazon.com",region:"us-east-1",storeLink:"mx-pre-prod.amazon.com/dp/",marketplaceId:"A1AM78C64UM0Y8",katalCloudWatchEndpoint:"https://s1ehmz8awg.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://wa9hufu4c9.execute-api.us-east-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"NAAmazon"},b={marketplace:"GB",domain:"read-pre-prod-uk.amazon.com",region:"eu-west-1",storeLink:"uk-pre-prod.amazon.com/dp/",marketplaceId:"A1F83G8C2ARO7P",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},x={marketplace:"DE",domain:"read-pre-prod-de.amazon.com",region:"eu-west-1",storeLink:"de-pre-prod.amazon.com/dp/",marketplaceId:"A1PA6795UKMFR9",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},A={marketplace:"FR",domain:"read-pre-prod-fr.amazon.com",storeLink:"fr-pre-prod.amazon.com/dp/",region:"eu-west-1",marketplaceId:"A13V1IB3VIYZZH",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},R={marketplace:"IT",domain:"read-pre-prod-it.amazon.com",region:"eu-west-1",storeLink:"it-pre-prod.amazon.com/dp/",marketplaceId:"APJ6JRA9NG5V4",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},S={marketplace:"ES",domain:"read-pre-prod-es.amazon.com",region:"eu-west-1",storeLink:"es-pre-prod.amazon.com/dp/",marketplaceId:"A1RKKUPIHCS9HS",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},y={marketplace:"NL",domain:"lezen-nl-preprod.dub.xcorp.amazon.com",region:"eu-west-1",storeLink:"nl-pre-prod.amazon.com/dp/",marketplaceId:"A1805IZSGTT6HS",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},I={marketplace:"IN",domain:"read-pre-prod-in.amazon.com",region:"eu-west-1",storeLink:"in-pre-prod.amazon.com/dp/",marketplaceId:"A21TJRUUN4KGV",katalCloudWatchEndpoint:"https://97meb3x32g.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://fdoxuxsenl.execute-api.eu-west-1.amazonaws.com/prod/v1/log",katalMetricsRealm:"EUAmazon"},T={marketplace:"CN",domain:"read-pre-prod-cn.amazon.com",region:"us-west-2",storeLink:"cn-pre-prod.amazon.com/dp/",marketplaceId:"AAHKV2X7AFYLW",katalCloudWatchEndpoint:"https://8p02hhqzs7.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalCloudWatchEndpointEmf:"https://arufknsm9d.execute-api.us-west-2.amazonaws.com/prod/v1/log",katalMetricsRealm:"CNAmazon"},W=function(){switch(window.location.hostname){case a.domain:return a;case n.domain:return n;case r.domain:return r;case i.domain:return i;case s.domain:return s;case c.domain:return c;case m.domain:return m;case p.domain:return p;case d.domain:return d;case u.domain:return u;case l.domain:return l;case h.domain:return h;case f.domain:return f;case w.domain:return w;case g.domain:return g;case k.domain:return k;case z.domain:return z;case v.domain:return v;case E.domain:return E;case C.domain:return C;case b.domain:return b;case x.domain:return x;case A.domain:return A;case R.domain:return R;case S.domain:return S;case y.domain:return y;case I.domain:return I;case T.domain:return T;default:return a}}},471:function(t,e,o){"use strict";o.r(e),o.d(e,"YJHtmlSampleBookProvider",(function(){return E}));var a,n=o(22),r=o(264),i=o(254);!function(t){t[t.Default=0]="Default",t[t.Night=1]="Night",t[t.Sepia=2]="Sepia",t[t.Green=3]="Green"}(a||(a={}));var s=o(313),c=function(){return(c=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},m=function(){function t(t,e,o){var a,r,m,d;this.status=n.d.STATUS_LOADING,this.bookViewer=null,this.renderSettings=c({},e),this.bookProvider=o,this.fontLoader=new i.a,this.onInitialization=null===(a=t.rendererCallBacks)||void 0===a?void 0:a.onInitialization,this.onFontLoadingStatusChanged=null===(r=t.rendererCallBacks)||void 0===r?void 0:r.onFontLoadingStatusChanged;var u=null===(m=t.rendererCallBacks)||void 0===m?void 0:m.onEndOfBook,l=(null===(d=t.rendererCallBacks)||void 0===d?void 0:d.onExternalLinkClick)||p;this.viewerConfig={supportedFontFormats:Object(i.c)(),onLinkClicked:l,onReadingStatusChanged:u?function(t){u(Object(s.b)(t))}:void 0,viewerRoot:t.rootElement,scrollContainer:t.scrollContainer}}return t.prototype.initialize=function(){var t=this;if(this.bookViewer)return Promise.resolve();var e=!1;return new Promise((function(o,a){t.fontLoader.getFontIndex().then((function(c){t.viewerConfig.readerFonts=c,t.onFontLoadingStatusChanged&&t.onFontLoadingStatusChanged(i.b.STATUS_LOADING_FONT_DONE),t.viewerConfig.onRenderStatusChanged=function(r,i){t.status=Object(s.c)(r),e||(r===s.a.READY?(t.onInitialization&&t.onInitialization(n.d.STATUS_IDLE),e=!0,o()):r===s.a.ERROR&&(t.onInitialization&&t.onInitialization(n.d.STATUS_ERROR),e=!0,a(new Error("Failed to load renderer. "+i))))},t.bookViewer=new r.BookViewerReflowable(t.viewerConfig,t.bookProvider,u(t.renderSettings))})).catch((function(e){t.onFontLoadingStatusChanged&&t.onFontLoadingStatusChanged(i.b.STATUS_LOADING_FONT_ERROR),a(e)}))}))},t.prototype.clear=function(){this.bookViewer&&this.bookViewer.clear()},t.prototype.redraw=function(t,e){return this.bookViewer?this.status===n.d.STATUS_ERROR?Promise.reject("Renderer failed to initialize."):(t&&(this.renderSettings=c({},t)),this.viewerConfig.scrollContainer=e,this.bookViewer.clear(),this.bookViewer=new r.BookViewerReflowable(this.viewerConfig,this.bookProvider,u(this.renderSettings)),Promise.resolve()):Promise.reject("Renderer not initialized yet.")},t.prototype.highlightSearchResult=function(t){this.bookViewer&&this.bookViewer.highlightSearchResult(t)},t.prototype.clearSearchHighlights=function(){this.bookViewer&&this.bookViewer.clearSearchHighlights()},t.prototype.getCurrentSettings=function(){return this.renderSettings},t.prototype.getReadingLocation=function(){return this.bookViewer?Promise.resolve(d(this.bookViewer.getCurrentReadingLocationData())):Promise.reject()},t.prototype.getStatus=function(){return this.status},t.prototype.goToPosition=function(t,e){var o;if(!this.bookViewer)throw"Renderer not initialized.";this.bookViewer.goToPosition(t,null===(o=e)||void 0===o?void 0:o.focus)},t.prototype.updateSettings=function(t){this.renderSettings=c(c({},this.renderSettings),t),this.applySettings()},t.prototype.setFont=function(t){this.renderSettings.font=t,this.applySettings()},t.prototype.setFontSize=function(t){this.renderSettings.fontSize=t,this.applySettings()},t.prototype.applySettings=function(){this.bookViewer&&this.bookViewer.applyRenderSettings(u(this.renderSettings)).then()},t}(),p=function(t){window.open(t)},d=function(t){return{currentPositionRange:{firstVisiblePid:t.currentPositionRange.firstVisiblePid,currentTopOfPage:t.currentPositionRange.topOfFirstVisiblePid,currentBottomOfPage:t.currentPositionRange.bottomOfFirstVisiblePid},minimumPosition:t.minimumPosition,maximumPosition:t.maximumPosition}},u=function(t){return{colorTheme:t.colorTheme||a.Default,font:t.font||"Bookerly",fontSize:t.fontSize,marginTop:t.marginTop,marginRight:t.marginRight,marginBottom:t.marginBottom,marginLeft:t.marginLeft,viewportHeight:t.viewportHeight,viewportWidth:t.viewportWidth,viewportTopOffset:t.viewportTopOffset}},l=o(250),h=o(290),f=o(124),w=new Map;w.set("us-east-1","d374oxlv7wyffd"),w.set("eu-west-1","d2i0w0hu6hvxgc"),w.set("ap-northeast-1","d2574jtht5dtd0");var g=function(t,e){var o=h.a().region,a=w.get(o)||w.get("us-east-1");return new URL(t+"/"+e,"https://"+a+".cloudfront.net/").toString()},k=function(){function t(t,e){this.asin=t,this.bookDirUrl=g(t,e)}return t.prototype.getContent=function(){if(this.contentPromise)return this.contentPromise;var t=new URL(this.bookDirUrl+"/content.json");return this.contentPromise=Object(l.a)(t.toString(),{}).then((function(t){return t.json()})),this.contentPromise},t.prototype.getManifest=function(){var t=this;return this.getContent().then((function(t){return 0===Object.keys(t).length?Promise.reject("Manifest is empty"):{language:t.language,writingMode:t.writingMode,progressionDirection:t.progressionDirection,srl:t.srl,coverImage:t.coverImage,sections:t.sections.map((function(t){return{startPosition:t.startPosition,endPosition:t.endPosition}})),resources:v(t)}})).catch((function(e){throw new f.a("Failed to get book manifest for YJ book with asin: ["+t.asin+"]. "+e)}))},t.prototype.getSectionContent=function(t){return this.getContent().then((function(e){return e.sections[t].content}))},t.prototype.getAllContent=function(){return this.getContent().then((function(t){return t.sections.map((function(t){return t.content}))}))},t.prototype.getResourceUrl=function(t){var e=this.bookDirUrl+"/"+t;return Promise.resolve(e)},t.prototype.getResourceAsString=function(t){if("styles.css"===t)return this.getContent().then((function(t){return t.stylesheet}));if("fonts.json"===t)return Promise.reject("cannot fetch "+t+" as string");var e=new URL(this.bookDirUrl+"/"+t);return Object(l.a)(e.toString(),{}).then((function(t){return t.text()}))},t.prototype.getResourceAsBlob=function(t){if("styles.css"===t||"fonts.json"===t)return Promise.reject("cannot fetch "+t+" as blob");var e=new URL(this.bookDirUrl+"/"+t);return Object(l.a)(e.toString(),{}).then((function(t){return t.blob()}))},t.prototype.getResourceAsObject=function(t){if("styles.css"===t)return Promise.reject("cannot fetch "+t+" as object");if("fonts.json"===t)return this.getContent().then((function(t){return z(t)?t.fonts:[]}));var e=new URL(this.bookDirUrl+"/"+t);return Object(l.a)(e.toString(),{}).then((function(t){return t.json()}))},t}(),z=function(t){return!!(t.fonts.length&&t.fonts.length>0)},v=function(t){var e=[];e.push({assetType:"stylesheet",name:"styles.css",mimeType:"text/css"});for(var o=0,a=t.images;o<a.length;o++){var n=a[o];e.push({assetType:"image",name:n.name,mimeType:n.mimeType,imageWidth:n.width,imageHeight:n.height})}if(z(t)){e.push({assetType:"font_index",name:"fonts.json",mimeType:"application/json"});for(var r=0,i=t.fonts;r<i.length;r++)for(var s=0,c=i[r].fontFiles;s<c.length;s++){var m=c[s];e.push({assetType:"font",name:m.fileName,mimeType:"font/"+m.format})}}return e.push({assetType:"toc",name:"toc.json",mimeType:"application/json"}),e},E=function(){function t(t,e){this.asin=t,this.revisionId=e,this.rendererBookProvider=new k(t,this.revisionId)}return t.prototype.getMetadata=function(){var t=this;return this.rendererBookProvider.getManifest().then((function(e){var o=new URL(e.coverImage,g(t.asin,t.revisionId)+"/").toString();return{asin:t.asin,coverUrl:o,language:e.language,srl:e.srl,navigationDirection:"rtl"===e.progressionDirection?n.b.RTL:n.b.LTR}}))},t.prototype.getCapabilities=function(){return Promise.resolve(n.a.Reflowable|n.a.VerticalScrolling)},t.prototype.createRenderer=function(t,e){var o=new m(t,e,this.rendererBookProvider);return Promise.resolve(o)},t.prototype.getTableOfContents=function(){var t=this;return this.rendererBookProvider.getManifest().then((function(e){return e.resources.some((function(t){return"toc.json"===t.name}))?t.rendererBookProvider.getResourceAsObject("toc.json").then((function(t){return t.map((function(t){return{position:t.pid,label:t.label,inSample:t.inSample,subitems:t.subitems}}))})):null}))},t.prototype.getFontChoices=function(){return["Bookerly","AmazonEmber"]},t.prototype.getBookContents=function(){return this.rendererBookProvider.getAllContent()},t}()}}]);