(function(g){var e=window.AmazonUIPageJS||window.P,v=e._namespace||e.attributeErrors,a=v?v("DetailPageAlohaAssets",""):e;a.guardFatal?a.guardFatal(g)(a,window):a.execute(function(){g(a,window)})})(function(g,e,v){g.when("A").register("aloha-cartapi",function(a){return{createAddToCartRequest:function(e,x,g,m,c,w){w=w||5E3;c=c||m;var p={items:[]};return{count:function(){return p.items.length},call:function(d){0<p.items.length&&a.$.ajax({url:d===v?e+"?ref_\x3ddp_atch_abb_atc":e+"?ref_\x3d"+d,xhrFields:{withCredentials:!0},
type:"POST",headers:{"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Accept-Language":"en-US","x-api-csrf-token":x},data:JSON.stringify(p),timeout:w,success:g,error:m,abort:c})},addItem:function(a,b,c){p.items.push({asin:a,offerListingId:b,quantity:Number(c||1)})}}}}});"use strict";g.when("A","a-modal","aloha-simplebundle-common","ready").execute(function(a,e,g){var u=!1,m=a.debounce(function(){if(a.$(".showBundleAsins.simpleBundleFeatureContainer").length){var c=
g.getSimpleBundlePageState()||{},e=c.csrfToken,p=c.cartEndpoint,d=c.items||[],c={baseAsin:c.baseAsin,marketplaceId:c.marketPlaceId,baseItemPrice:a.$("#base-product-price").data("base-product-price"),clientType:"aloha-simplebundle-desktop",currencyOfPreferenceSupported:c.currencyOfPreferenceSupported||!1},b=g.createMetricsLogger(c);u||(u=!0,a.defer(function(){b.logNexusImpression(d)}));g.setupAccessoryAddToCart(d,b,p,e)}},200);(function(){a.declarative("show-review-tab","click",function(c){a.$(c.$target).closest("#a-page").find(".popoverReviewsTab").click()});
a.declarative("add-to-cart","click",function(c){a.$(".showBundleAsins.simpleBundleFeatureContainer .simple-bundle-buybox-item-checkbox input[type\x3d'checkbox']").filter(function(){return a.$(this).data("asin")===c.data.asin}).prop("checked",!0).change();a.$("[id^\x3dpopover-simpleBundle-]").each(function(){var c=e.get(a.$(this));c.isActive()&&c.hide()})});a.declarative("focus-image","mouseenter",function(a){var e=a.$target,g=e.parents("#a-page");a=a.data;g.find("#productImageMain-"+a.asin).attr("src",
a.imageUrl);g.find(".thumbnail-group").removeClass("a-button-selected");g.find("#"+e.prop("name")).addClass("a-button-selected")})})();m();a.on("a:pageUpdate",m);a.on("attach:dss:initialized",function(){a.off("a:pageUpdate",m);m()})});"use strict";g.when("A","a-checkbox","aloha-cartapi","aloha-buy-now-integration","aloha-buybox-form-util").register("aloha-simplebundle-common",function(a,r,x,u,m){function c(n,d){var b=a.$(n);b.change(function(){b.prop("checked",this.checked)});var l=a.$(d);l.length||
(l=b);return{$element:b,$container:l,api:r(n),show:function(){l.hasClass(k.AUI_HIDDEN)&&l.removeClass(k.AUI_HIDDEN);l.show()},hide:function(){l.hasClass(k.AUI_HIDDEN)||l.addClass(k.AUI_HIDDEN)},isVisible:function(){return!l.hasClass(k.AUI_HIDDEN)}}}function w(a,b,d){b.forEach(function(b){a.addItem(b.asin,b.offerListingId,b.quantity);d.logCheckboxSelected(b.index,b.quantity)})}function p(a,b,d){var l=[],e=[];b.forEach(function(b,c){var h=a[c];b.api.isChecked()?l.push({asin:h.asin,offerListingId:h.offerListingId,
ourPrice:h.ourPrice,ourPriceAmount:h.ourPriceAmount,ourPriceSymbol:h.ourPriceSymbol,ourPriceCode:h.ourPriceCode,index:c,quantity:d}):e.push({asin:h.asin,ourPrice:h.ourPrice,ourPriceAmount:h.ourPriceAmount,ourPriceSymbol:h.ourPriceSymbol,ourPriceCode:h.ourPriceCode,index:c,isVisible:b.isVisible()})});return{selectedLineItems:l,unselectedItems:e}}var d=/[^\d,\.]/g,b=/,/g,B=/\./g,C=/(^\D+|\D+$)/,k={AUI_HIDDEN:"aok-hidden"},v=!1;return{createMetricsLogger:function(n){function c(a,b){e.ue&&e.ue.count&&
e.ue.count("aloha-simplebundle-"+a,b)}function k(){var a;a=n.currencyOfPreferenceSupported?{priceFormatted:n.baseItemPrice,priceDecimal:null,currencySymbol:null}:p(n.baseItemPrice);return{baseAsin:n.baseAsin,baseItemPrice:a.priceFormatted,baseItemCurrencySymbol:a.currencySymbol,baseItemPriceDecimal:a.priceDecimal,clientType:n.clientType,feature:"abb"}}function l(a,b){e.ue&&e.ue.event&&(a.requestId=A,a.producerId="atch",a.obfuscatedMarketplaceId=n.marketplaceId,e.ue.event(a,"atch",b,{ssd:!0}))}function g(a){return n.currencyOfPreferenceSupported?
{priceFormatted:a.ourPrice,priceDecimal:parseFloat(a.ourPriceAmount)||null,currencySymbol:a.ourPriceSymbol}:p(a.ourPrice)}function p(a){a=a||"";var n=a.lastIndexOf(","),q=a.lastIndexOf("."),f;n>q?(q=B,f=b):(q=b,f=B);(n=a.match(C))&&(n=n[0].trim());q=a.replace(d,"").replace(q,"").replace(f,".");q=parseFloat(q);return{priceFormatted:a,currencySymbol:n,priceDecimal:q}}var A=Date.now().toString(10)+Math.random().toString(16).substring(2,13);a.defer(function(){c("view",1)});return{logAddToCart:function(a){c("addtocart",
a)},logExpandedLink:function(){c("buybox-expanded-link",1)},logCheckboxSelected:function(a,b){c("checkbox-"+(a+1),b)},logItemLink:function(a){c("link-"+(a+1),1)},logNexusImpression:function(a){var b=k();b.accessories=a.map(function(a,b){var d=g(a);return{asin:a.asin,displayPosition:b+1,price:d.priceFormatted,currencySymbol:d.currencySymbol,priceDecimal:d.priceDecimal}});l(b,"attach.ABBImpression.5")},logNexusAddBaseToCart:function(a,b,q){var f=k();f.baseQuantity=Number(q);f.accessoriesAdded=a.map(function(a){var b=
g(a);return{asin:a.asin,displayPosition:a.index+1,quantity:Number(a.quantity),price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});f.accessoriesNotAdded=b.map(function(a){var b=g(a);return{asin:a.asin,displayPosition:a.index+1,price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});l(f,"attach.ABBAddBaseToCart.9")},logNexusOpenMiniDP:function(a,b){var q=g(b),f=k();f.accessoryAsin=b.asin;f.accessoryDisplayPosition=Number(a)+1;f.accessoryPrice=
q.priceFormatted;f.accessoryItemCurrencySymbol=q.currencySymbol;f.accessoryItemPriceDecimal=q.priceDecimal;l(f,"attach.ABBShowMiniDP.4")}}},getSimpleBundlePageState:function(){var b=a.$(".simpleBundleJavascriptParameters").find("script").html();return a.parseJSON(b)},getCheckboxCollectionObject:c,setupAccessoryAddToCart:function(b,d,c,l){function p(b,f,d,n){var t=x.createAddToCartRequest(c,l,function(a){r(b);h.push({asin:f.asin,offerListingId:f.offerListingId,ourPrice:f.ourPrice,ourPriceAmount:f.ourPriceAmount,
ourPriceSymbol:f.ourPriceSymbol,ourPriceCode:f.ourPriceCode,index:d,quantity:1});g.when("EWC").execute("abb-everywhere-cart",function(a){a.refresh()});var c=a.entity.count.entity.items;g.when("nav.setCartCount").execute("abb-nav-cart",function(a){a(c)})},function(){a.$("#abb_add_accessory_spinner_"+b).addClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_spinner_"+b).addClass(k.AUI_HIDDEN);a.$("#abb_add_accessory_error_"+b).removeClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_error_"+b).removeClass(k.AUI_HIDDEN);
e.ueLogError&&e.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"})});t.addItem(b,f.offerListingId);t.call(n)}function r(b){a.$("#abb_add_accessory_spinner_"+b).addClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_spinner_"+b).addClass(k.AUI_HIDDEN);a.$("#abb_add_accessory_alert_"+b).removeClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_alert_"+b).removeClass(k.AUI_HIDDEN)}var A=[],h=[],z=[];v||
(v=!0,a.$(".simpleBundleSection").each(function(b,f){a.$(f).closest("#simpleBundleV2_feature_div").length||a.$(f).closest("#simpleBundle_feature_div").length||f.remove()}),b.forEach(function(a,b){A.push({asin:a.asin,offerListingId:a.offerListingId,ourPrice:a.ourPrice,ourPriceAmount:a.ourPriceAmount,ourPriceSymbol:a.ourPriceSymbol,ourPriceCode:a.ourPriceCode,index:b,quantity:1})}),a.declarative("abb-accessory-add","click",function(d){var f=d.data;d=f.asin;for(var c,l=0;l<b.length;l++)if(b[l].asin===
d){c=l;break}l=b[c];f=f.atcRefmarker;a.$("#abb_accessory_add_button_"+d).addClass(k.AUI_HIDDEN);a.$("#minidp_accessory_add_button_"+d).addClass(k.AUI_HIDDEN);a.$("#abb_add_accessory_spinner_"+d).removeClass(k.AUI_HIDDEN);a.$("#minidp_add_accessory_spinner_"+d).removeClass(k.AUI_HIDDEN);p(d,l,c,f)}),e.addEventListener("beforeunload",function(){A.forEach(function(a){h.some(function(b){return b.asin===a.asin})||z.push(a)});d.logNexusAddBaseToCart(h,z,1)}))},setupAddToCart:function(b,d,c,l,k,g,r){function h(b,
n){if(z){var h=a.$(b.currentTarget);if(u.isBuyNow(h)){var t=r?1:q.find("*[name\x3d'quantity']").val()||1,y=p(c,d,t);u.checkoutWith(y.selectedLineItems,h)}else return}var m=x.createAddToCartRequest(k,g,function(){n()},function(){e.ueLogError&&e.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"});n()}),t=r?1:q.find("*[name\x3d'quantity']").val()||1,y=p(c,d,t);w(m,y.selectedLineItems,l);h=y.unselectedItems.filter(function(a){return a.isVisible});
l.logNexusAddBaseToCart(y.selectedLineItems,h,t);t=m.count();0!==t&&(h=a.$(b.currentTarget),u.isBuyNow(h)?u.checkoutWith(y.selectedLineItems,h):(z=!0,b.preventDefault(),l.logAddToCart(t),m.call()))}var z=!1,q=b;b.unbind("submit.SimpleBundleSubmitHandler");b.bind("submit.SimpleBundleSubmitHandler",function(b){var d=a.$(this);h(b,function(){d.submit()})});b.find(":submit").unbind("click.SBB");b.find(":submit").bind("click.SBB",function(b){var d=a.$(this),c=d.closest(".a-accordion-row-container");c.length&&
(q=c,h(b,function(){d.click()}))})},setupAddToCartForDeclarative:function(a,b,d,c,k,r,m,h){a.unbind("click.SimpleBundleClickHandler");a.bind("click.SimpleBundleClickHandler",function(a){a=x.createAddToCartRequest(k,r,function(){g.now("attach-external-atc-interceptor").execute(function(a){a&&f.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})})},function(){e.ueLogError&&e.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},
{logLevel:"ERROR",attribution:"SimpleBundle"})});var n=m?1:h.find("*[name\x3d'quantity']").val()||1,f=p(d,b,n);w(a,f.selectedLineItems,c);var D=f.unselectedItems.filter(function(a){return a.isVisible});c.logNexusAddBaseToCart(f.selectedLineItems,D,n);if(n=a.count())c.logAddToCart(n),a.call()})},setupCheckboxes:function(a,b,d,k,g,e,p,h,r,q){var f=c(e,h);a.push(f);f.api.enable();f.$element.data("asin",k);if(d){var m=c(p,r);m.api.enable();m.api.check(f.api.isChecked());m.$element.change(function(){var a=
m.api.isChecked();f.api.check(a)});f.$element.change(function(){var b=f.api.isChecked();m.api.check(b);var d=0;a.forEach(function(a){d<g&&a.api.isChecked()?(d++,a.show()):a.hide()});d<g&&a.forEach(function(a){d<g&&a.api.isUnchecked()&&(d++,a.show())})})}else"SINGLE"===q&&f.$element.change(function(){f.api.isChecked()&&a.forEach(function(a,d){b!==d&&a.api.uncheck()})});0<a.length&&a[0].$element.change()},setupAddToCartForButton:function(b,d,c,k,e,r){function x(){var a=e?1:h.find("*[name\x3d'quantity']").val()||
1,b=p(c,d,a);m.addItems(r,b.selectedLineItems,k);var f=b.unselectedItems.filter(function(a){return a.isVisible});g.now("attach-external-atc-interceptor").execute(function(a){a&&b.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})});k.logNexusAddBaseToCart(b.selectedLineItems,f,a);k.logAddToCart(b.selectedLineItems.length)}var h=r;b.unbind("click.button.SBB");b.bind("click.button.SBB",function(){var b=a.$(this).closest(".a-accordion-row-container");b.length&&(h=b);x()})}}});"use strict";
g.when("ready").register("aloha-buy-now-integration",function(){var a={};g.when("turbo-checkout-buy-now-integration").execute(function(g){a=g});return{isBuyNow:function(g){return"function"===typeof a.isBuyNow&&a.isBuyNow(g)},checkoutWith:function(g,e){return a.checkoutWith(g,e)}}});"use strict";g.when("A").register("aloha-buybox-form-util",function(a){function g(a,b,c){var e="items["+a+".abb]";b.forEach(function(a){e+="["+a+"]"});a=document.createElement("input");a.type="hidden";a.name=e;a.value=
c;a.classList.add("aloha-accessory-form-input");return a}function e(a,b){var c=a.elements.namedItem(b.name);c&&a.removeChild(c);a.appendChild(b)}function u(a,b){e(a,g(b.index,["asin"],b.asin));e(a,g(b.index,["offerListingId"],b.offerListingId));e(a,g(b.index,["quantity"],b.quantity))}function m(a){for(var b=2;0<a.find('input[name\x3d"asin.'+b+'"]').length||0<a.find('input[name\x3d"offeringID.'+b+'"]').length;)b++;return b}function c(a,b){for(;0<a.find('input[name\x3d"asin.'+b+'"]').length||0<a.find('input[name\x3d"offeringID.'+
b+'"]').length;)b++;return b}function w(d,b){return[a.$("\x3cinput /\x3e",{type:"hidden",name:"asin."+b,value:d.asin,class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+b,value:d.offerListingId,class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"quantity."+b,value:d.quantity||1,class:"aloha-accessory-form-input"})]}var p=[];a.on("aloha:detailPage:reappear",function(){p=[];a.$(".aloha-accessory-form-input").remove()});return{addItems:function(a,
b,g){var e=m(a);b.forEach(function(b){if(b!==v&&b.asin&&b.offerListingId){e=c(a,e);var m=w(b,e);m.forEach(function(b){a.append(b)});u(a.get(0),b);p.push(m);e++;g&&g.logCheckboxSelected(b.index,b.quantity)}});b=a.find('input[name\x3d"itemCount"]');0===b.length?a.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+e+'"\x3e'):b[0].value=Math.max(b[0].value,e)}}})});